<app-nav></app-nav>
<div id="searchBar">
  <div class="row">
    <div class="col=md-12">
      <div class="form-group">
        <input placeholder="Search A Venue" type="text" class="input" id="place" #addresstext autocomplete="off"
          autocapitalize="off" spellcheck="off">
      </div>
    </div>
  </div>
  <div id="filtersearchBar">
    <div class="row">
      <input #query (keyup)="filter(query.value)" type="text" class="form-control" placeholder="Filter Search Results By Venue Genre">
        {{message}}
    </div>
<agm-map [zoom]="15" [styles]="styles" [latitude]="latitude" [longitude]="longitude" (mapReady)="loadMarkers($event)">
  <agm-marker *ngFor="let m of filteredVenues; let i = index" [latitude]="m.lat" [longitude]="m.lng" [iconUrl]="m.icon">
    <agm-info-window>
      <strong>Name: </strong>
      <p>{{ m.name }}</p>
      <strong>Addresss: </strong>
      <p>{{ m.address }}</p>
      <strong>Website: </strong>
      <p>{{ m.website }}</p>
      <strong>List: </strong>
      <p>{{ m.list }}</p>
      <strong>Opening hours: </strong>
      <p *ngFor="let n of m.opening_hours">{{ n }}</p>
      <strong>Flagged As: </strong>
      <p></p>
      <a mat-button class="viewBtn" [routerLink]="['/viewreview',m.placeID]">See Reviews</a>
    </agm-info-window>
  </agm-marker>
  <agm-marker [latitude]="search.lat" [longitude]="search.lng" [iconUrl]="search.icon">
    <agm-info-window>
      <strong>Name: </strong>
      <p>{{ search.name }}</p>
      <strong>Addresss: </strong>
      <p>{{ search.address }}</p>
      <strong>Website: </strong>
      <p>{{ search.website }}</p>
      <strong>Opening hours: </strong>
      <p *ngFor="let n of search.opening_hours">{{ n }}</p>
      <strong>Add to list:</strong>
      <form>
        <select ng-model="selectedList" (change)="setCurrentSelect($event)">
          <option *ngFor="let p of lists" [value]="p._id">{{ p.name }} </option>
        </select>
        <br><br>
        <button type="submit" (click)="addVenuetoList(search.placeID)">Add</button>
      </form>
      <a mat-button class="viewBtn" [routerLink]="['/viewreview',search.placeID]">See Reviews</a>
    </agm-info-window>
  </agm-marker>
</agm-map>